{"version":3,"sources":["../src/edu.js"],"names":["define","$","init","a","b","c","window","pageYOffset","document","documentElement","body","parentNode","scrollTop","d","clientHeight","f","getBoundingClientRect","height","g","top","h","bottom","expr","e","parseInt","ajaxSetup","cache","videoFormat","v","createElement","canPlayType","replace","renderEsObject","esObject","wrapper","url","attr","parent","get","data","html","append","css","width","toLowerCase","indexOf","setTimeout","removeAttr","each","scroll","click","target","closest","length","hide","toggle_button","metadata","find","hasClass","toggleClass","removeClass","show"],"mappings":"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","sourcesContent":["// This file is part of edu-sharing created by metaVentis GmbH — http://metaventis.com\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @package    filter_edusharing\r\n * @copyright  metaVentis GmbH — http://metaventis.com\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n\r\ndefine(['jquery'], function($) {\r\n\r\n    return {\r\n        init: function() {\r\n\r\n\r\n            !function () {\r\n                function a(a, b) {\r\n                    var c = void 0 !== window.pageYOffset ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop,\r\n                        d = document.documentElement.clientHeight, e = c + d;\r\n                    b = b || 0;\r\n                    var f = a.getBoundingClientRect();\r\n                    if (0 === f.height) return !1;\r\n                    var g = f.top + c - b, h = f.bottom + c + b;\r\n                    return h > c && e > g\r\n                }\r\n\r\n                $.expr[\":\"][\"near-viewport\"] = function (b, c, d) {\r\n                    var e = parseInt(d[3]) || 0;\r\n                    return a(b, e)\r\n                }\r\n            }();\r\n\r\n            $.ajaxSetup({cache: false});\r\n\r\n            var videoFormat = 'webm';\r\n            var v = document.createElement('video');\r\n            if (v.canPlayType && v.canPlayType('video/mp4').replace(/no/, '')) {\r\n                videoFormat = 'mp4';\r\n            }\r\n\r\n            function renderEsObject(esObject, wrapper) {\r\n                var url = esObject.attr(\"data-url\") + '&videoFormat=' + videoFormat;\r\n                if (typeof wrapper == 'undefined')\r\n                    var wrapper = esObject.parent();\r\n                $.get(url, function (data) {\r\n                    wrapper.html('').append(data).css({height: 'auto', width: 'auto'});\r\n                    if (data.toLowerCase().indexOf('data-view=\"lock\"') >= 0)\r\n                        setTimeout(function () {\r\n                            renderEsObject(esObject, wrapper);\r\n                        }, 1111);\r\n                });\r\n                esObject.removeAttr(\"data-type\");\r\n            }\r\n\r\n            $(\"div[data-type='esObject']:near-viewport(400)\").each(function () {\r\n                renderEsObject($(this));\r\n            })\r\n\r\n            $(window).scroll(function () {\r\n                $(\"div[data-type='esObject']:near-viewport(400)\").each(function () {\r\n                    renderEsObject($(this));\r\n                })\r\n            });\r\n\r\n            $(\"body\").click(function (e) {\r\n                if ($(e.target).closest(\".edusharing_metadata\").length) {\r\n                    //clicked inside \".edusharing_metadata\" - do nothing\r\n                } else if ($(e.target).closest(\".edusharing_metadata_toggle_button\").length) {\r\n                    $(\".edusharing_metadata\").hide();\r\n                    toggle_button = $(e.target);\r\n                    metadata = toggle_button.parent().find(\".edusharing_metadata\");\r\n                    if (metadata.hasClass('open')) {\r\n                        metadata.toggleClass('open');\r\n                        metadata.hide();\r\n                    } else {\r\n                        $(\".edusharing_metadata\").removeClass('open');\r\n                        metadata.toggleClass('open');\r\n                        metadata.show();\r\n                    }\r\n                } else {\r\n                    $(\".edusharing_metadata\").hide();\r\n                    $(\".edusharing_metadata\").removeClass('open');\r\n                }\r\n            });\r\n        }}\r\n});"],"file":"edu.min.js"}